<!doctype html><html lang=ja-jp><head><meta charset=utf-8><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content='環境管理
パッケージマネージャ
$ pip install --outdated
$ pip show {pkg}
$ pip freeze > requirements.txt
$ pip install -r requirements.txt -c constraints.txt
仮想化
$ python -m venv .venv
$ . .venv/bin/activate
便利な言語機能
関数の引数

位置引数
キーワード引数
可変長位置引数 … *func
可変長キーワード引数 … **func
* … 後に続く引数をキーワード専用引数にする (def func(val1, val2, *, val3) )
/ … 前の引数を位置専用引数にする

オブジェクト関連
print(id(123))
print(type(123))
print(isinstance(123, int))
print(issubclass(float, object)) ... True
help(int)
print(dir(123))
プロパティ
class Hoge:
    _name = None

    @property
    def name(self):
        return self._name
    @name.setter
    def name(self, val):
        self._name = val

obj = Hoge()
print(obj.name)
obj.name = "hoge"
print(obj.name)
静的メソッド
class Hoge:
    def nyao(self, val):
        Hoge.piyo(val)
    def hell(self, val):
        Hoge.hoge(val)

    @classmethod
    def piyo(cls, val):
        print(f"Called piyo {val}.")

    @staticmethod
    def hoge(val):
        print(f"Called hoge {val}.")

Hoge.hoge(123)
Hoge.piyo(234)
var = Hoge()
var.hell(345)
コンテキストマネージャ

__enter__ , __exit__ のメソッドを持つオブジェクト
with 句で指定すると楽

import contextlib
@contextlib.contextmanager
def context_manager_sample():
    try:
        print("processing")
        yield "aaa"
    finally:
        print("finalization")

with context_manager_sample() as a:
    print(a)
    pass
テストに便利なもの
使う時に毎回覚えていない類。'><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]}}</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><meta name=generator content="Hugo 0.147.7"><title>備忘録 | Memo.Namo</title><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/style/main.css></head><body><div class=flexbox><div><header id=site-header class=toplevel-container><h1><a href=/>Memo.Namo</a></h1><nav><ul class=horizontal-menu><li class=horizontal-menu-item><a href=/about/>About</a></li><li class=horizontal-menu-item><a href=/knowledge/>Knowledge</a></li></ul></nav></header><main id=site-main class=toplevel-container><article class="content-container content-grid"><header class=content-grid-header><div><a class=nav-category href=/knowledge/python/>Python</a><h1 class=content-grid-title>備忘録</h1></div><p class=content-grid-desc><span>公開日: 2025-05-18</span>
<span>更新日: 2025-05-18</span></p></header><aside class=content-grid-side><div class=nav-sticky><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#環境管理>環境管理</a><ul><li><a href=#パッケージマネージャ>パッケージマネージャ</a></li><li><a href=#仮想化>仮想化</a></li></ul></li><li><a href=#便利な言語機能>便利な言語機能</a><ul><li><a href=#関数の引数>関数の引数</a></li><li><a href=#オブジェクト関連>オブジェクト関連</a></li><li><a href=#プロパティ>プロパティ</a></li><li><a href=#静的メソッド>静的メソッド</a></li><li><a href=#コンテキストマネージャ>コンテキストマネージャ</a></li></ul></li><li><a href=#テストに便利なもの>テストに便利なもの</a><ul><li><a href=#doctest>DocTest</a></li><li><a href=#unittest>UnitTest</a></li><li><a href=#unittestmock>UnitTest.Mock</a></li><li><a href=#timeit>Timeit</a></li></ul></li></ul></nav><nav class=nav-tag><h2>タグ</h2><ul class=tag-container><li class="tag-item tag-item-inactive"><a href=/tags/auth/>Auth</a></li><li class="tag-item tag-item-inactive"><a href=/tags/businessman/>BusinessMan</a></li><li class="tag-item tag-item-inactive"><a href=/tags/database/>Database</a></li><li class="tag-item tag-item-inactive"><a href=/tags/dataengineering/>DataEngineering</a></li><li class="tag-item tag-item-inactive"><a href=/tags/datavisualization/>DataVisualization</a></li><li class="tag-item tag-item-inactive"><a href=/tags/devops/>DevOps</a></li><li class="tag-item tag-item-inactive"><a href=/tags/iac/>IaC</a></li><li class="tag-item tag-item-inactive"><a href=/tags/infrastructure/>Infrastructure</a></li></ul></nav></div></aside><section class="md-content content-grid-main"><h1 id=環境管理>環境管理</h1><h2 id=パッケージマネージャ>パッケージマネージャ</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ pip install --outdated
</span></span><span class=line><span class=cl>$ pip show <span class=o>{</span>pkg<span class=o>}</span>
</span></span><span class=line><span class=cl>$ pip freeze &gt; requirements.txt
</span></span><span class=line><span class=cl>$ pip install -r requirements.txt -c constraints.txt
</span></span></code></pre></div><h2 id=仮想化>仮想化</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ python -m venv .venv
</span></span><span class=line><span class=cl>$ . .venv/bin/activate
</span></span></code></pre></div><h1 id=便利な言語機能>便利な言語機能</h1><h2 id=関数の引数>関数の引数</h2><ul><li>位置引数</li><li>キーワード引数</li><li>可変長位置引数 … <code>*func</code></li><li>可変長キーワード引数 … <code>**func</code></li><li><code>*</code> … 後に続く引数をキーワード専用引数にする (<code>def func(val1, val2, *, val3)</code> )</li><li><code>/</code> … 前の引数を位置専用引数にする</li></ul><h2 id=オブジェクト関連>オブジェクト関連</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>id</span><span class=p>(</span><span class=mi>123</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=mi>123</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>isinstance</span><span class=p>(</span><span class=mi>123</span><span class=p>,</span> <span class=nb>int</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>issubclass</span><span class=p>(</span><span class=nb>float</span><span class=p>,</span> <span class=nb>object</span><span class=p>))</span> <span class=o>...</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl><span class=n>help</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>dir</span><span class=p>(</span><span class=mi>123</span><span class=p>))</span>
</span></span></code></pre></div><h2 id=プロパティ>プロパティ</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Hoge</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>_name</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_name</span>
</span></span><span class=line><span class=cl>    <span class=nd>@name.setter</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>name</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>val</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_name</span> <span class=o>=</span> <span class=n>val</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>obj</span> <span class=o>=</span> <span class=n>Hoge</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>obj</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>obj</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=s2>&#34;hoge&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>obj</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=静的メソッド>静的メソッド</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Hoge</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>nyao</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>val</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>Hoge</span><span class=o>.</span><span class=n>piyo</span><span class=p>(</span><span class=n>val</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>hell</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>val</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>Hoge</span><span class=o>.</span><span class=n>hoge</span><span class=p>(</span><span class=n>val</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@classmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>piyo</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>val</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Called piyo </span><span class=si>{</span><span class=n>val</span><span class=si>}</span><span class=s2>.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@staticmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>hoge</span><span class=p>(</span><span class=n>val</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Called hoge </span><span class=si>{</span><span class=n>val</span><span class=si>}</span><span class=s2>.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Hoge</span><span class=o>.</span><span class=n>hoge</span><span class=p>(</span><span class=mi>123</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Hoge</span><span class=o>.</span><span class=n>piyo</span><span class=p>(</span><span class=mi>234</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>var</span> <span class=o>=</span> <span class=n>Hoge</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>var</span><span class=o>.</span><span class=n>hell</span><span class=p>(</span><span class=mi>345</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=コンテキストマネージャ>コンテキストマネージャ</h2><ul><li><code>__enter__</code> , <code>__exit__</code> のメソッドを持つオブジェクト</li><li>with 句で指定すると楽</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>contextlib</span>
</span></span><span class=line><span class=cl><span class=nd>@contextlib.contextmanager</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>context_manager_sample</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;processing&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>yield</span> <span class=s2>&#34;aaa&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;finalization&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=n>context_manager_sample</span><span class=p>()</span> <span class=k>as</span> <span class=n>a</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span>
</span></span></code></pre></div><h1 id=テストに便利なもの>テストに便利なもの</h1><p>使う時に毎回覚えていない類。</p><h2 id=doctest>DocTest</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>doctest</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>hoge</span><span class=p>(</span><span class=n>x</span><span class=p>:</span> <span class=nb>int</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    hogehoge
</span></span></span><span class=line><span class=cl><span class=s2>    ===========
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>    &gt;&gt;&gt; hoge(10)
</span></span></span><span class=line><span class=cl><span class=s2>    20
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>x</span> <span class=o>+</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>fooo</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    &gt;&gt;&gt; fooo()
</span></span></span><span class=line><span class=cl><span class=s2>    Traceback (most recent call last):
</span></span></span><span class=line><span class=cl><span class=s2>    BaseException: hello exception
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Traceback (innermost last): でも可能</span>
</span></span><span class=line><span class=cl>    <span class=k>raise</span> <span class=ne>BaseException</span><span class=p>(</span><span class=s2>&#34;hello exception&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=kn>import</span> <span class=nn>doctest</span>
</span></span><span class=line><span class=cl>    <span class=n>doctest</span><span class=o>.</span><span class=n>testmod</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># testmod を呼ばずにCLIから実行する事も可能</span>
</span></span><span class=line><span class=cl><span class=c1># python -m doctest {python script file path}</span>
</span></span></code></pre></div><h2 id=unittest>UnitTest</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>unittest</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>HogeTest</span><span class=p>(</span><span class=n>unittest</span><span class=o>.</span><span class=n>TestCase</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@classmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>setUpClass</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;テストクラス単位での事前処理&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>setUpClass</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@classmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>tearDownClass</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;テストクラス単位での事後処理&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>tearDownClass</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>setUp</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;テストごとの事前処理&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>setUp</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>tearDown</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;テストごとの事後処理&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>tearDown</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># テストケースのメソッドは &#34;test～&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_foo1</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>val_expect</span> <span class=o>=</span> <span class=mi>123</span>
</span></span><span class=line><span class=cl>        <span class=n>val_actual</span> <span class=o>=</span> <span class=mi>123</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>val_expect</span><span class=p>,</span> <span class=n>val_actual</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_foo2</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>val_expect</span> <span class=o>=</span> <span class=mi>123</span>
</span></span><span class=line><span class=cl>        <span class=n>val_actual</span> <span class=o>=</span> <span class=mi>234</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>val_expect</span><span class=p>,</span> <span class=n>val_actual</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_foo3</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>subTest</span><span class=p>(</span><span class=s2>&#34;subtest1&#34;</span><span class=p>,</span> <span class=n>aaa</span><span class=o>=</span><span class=mi>123</span><span class=p>,</span> <span class=n>bbb</span><span class=o>=</span><span class=mi>234</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=mi>123</span><span class=p>,</span> <span class=mi>234</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>subTest</span><span class=p>(</span><span class=s2>&#34;subtest2&#34;</span><span class=p>,</span> <span class=n>aaa</span><span class=o>=</span><span class=mi>123</span><span class=p>,</span> <span class=n>bbb</span><span class=o>=</span><span class=mi>234</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=mi>123</span><span class=p>,</span> <span class=mi>123</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>subTest</span><span class=p>(</span><span class=s2>&#34;subtest3&#34;</span><span class=p>,</span> <span class=n>aaa</span><span class=o>=</span><span class=mi>123</span><span class=p>,</span> <span class=n>bbb</span><span class=o>=</span><span class=mi>234</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=mi>123</span><span class=p>,</span> <span class=mi>234</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># if __name__ == &#34;__main__&#34;:</span>
</span></span><span class=line><span class=cl><span class=c1>#     unittest.main()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CLI からも実行可能</span>
</span></span><span class=line><span class=cl><span class=c1># python -m unittest sample.HogeTest.test_foo1</span>
</span></span></code></pre></div><h2 id=unittestmock>UnitTest.Mock</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>unittest</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>unittest.mock</span> <span class=kn>import</span> <span class=n>Mock</span><span class=p>,</span> <span class=n>patch</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>hogemod</span> <span class=kn>import</span> <span class=n>HogeParent</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>HogeTest</span><span class=p>(</span><span class=n>unittest</span><span class=o>.</span><span class=n>TestCase</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_foo01</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>mock</span> <span class=o>=</span> <span class=n>Mock</span><span class=p>([</span><span class=s2>&#34;hoge&#34;</span><span class=p>,</span> <span class=s2>&#34;fooo&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        <span class=n>mock</span><span class=o>.</span><span class=n>return_value</span> <span class=o>=</span> <span class=mi>123</span>
</span></span><span class=line><span class=cl>        <span class=n>mock</span><span class=o>.</span><span class=n>hoge</span><span class=o>.</span><span class=n>return_value</span> <span class=o>=</span> <span class=s2>&#34;aaa&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>mock</span><span class=o>.</span><span class=n>fooo</span><span class=o>.</span><span class=n>return_value</span> <span class=o>=</span> <span class=s2>&#34;bbb&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>res</span> <span class=o>=</span> <span class=n>mock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=mi>123</span><span class=p>,</span> <span class=n>res</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=s2>&#34;aaa&#34;</span><span class=p>,</span> <span class=n>mock</span><span class=o>.</span><span class=n>hoge</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=s2>&#34;bbb&#34;</span><span class=p>,</span> <span class=n>mock</span><span class=o>.</span><span class=n>fooo</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_foo02</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>mock</span> <span class=o>=</span> <span class=n>Mock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>mock</span><span class=o>.</span><span class=n>side_effect</span> <span class=o>=</span> <span class=ne>BaseException</span>
</span></span><span class=line><span class=cl>            <span class=n>mock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span><span class=p>:</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertRaises</span><span class=p>(</span><span class=ne>BaseException</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@patch</span><span class=p>(</span><span class=s2>&#34;hogemod.HogeChild1&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_foo03</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>HogeChild1Mock</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>mock_ins</span> <span class=o>=</span> <span class=n>HogeChild1Mock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>mock_ins</span><span class=o>.</span><span class=n>get_value</span><span class=o>.</span><span class=n>return_value</span> <span class=o>=</span> <span class=mi>999</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>obj</span> <span class=o>=</span> <span class=n>HogeParent</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>res</span> <span class=o>=</span> <span class=n>obj</span><span class=o>.</span><span class=n>get_value</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=mi>999</span><span class=p>,</span> <span class=n>res</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_foo03</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=n>patch</span><span class=p>(</span><span class=s2>&#34;hogemod.HogeChild1&#34;</span><span class=p>)</span> <span class=k>as</span> <span class=n>HogeChild1Mock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>mock_ins</span> <span class=o>=</span> <span class=n>HogeChild1Mock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>mock_ins</span><span class=o>.</span><span class=n>get_value</span><span class=o>.</span><span class=n>return_value</span> <span class=o>=</span> <span class=mi>999</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>obj</span> <span class=o>=</span> <span class=n>HogeParent</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>res</span> <span class=o>=</span> <span class=n>obj</span><span class=o>.</span><span class=n>get_value</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=mi>999</span><span class=p>,</span> <span class=n>res</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>unittest</span><span class=o>.</span><span class=n>main</span><span class=p>()</span>
</span></span></code></pre></div><h2 id=timeit>Timeit</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>timeit</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>res</span> <span class=o>=</span> <span class=n>timeit</span><span class=o>.</span><span class=n>timeit</span><span class=p>(</span><span class=s1>&#39;print(&#34;timeit&#34;)&#39;</span><span class=p>,</span> <span class=n>number</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;timeit:&#34;</span><span class=p>,</span> <span class=n>res</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>res</span> <span class=o>=</span> <span class=n>timeit</span><span class=o>.</span><span class=n>repeat</span><span class=p>(</span><span class=s1>&#39;print(&#34;repeat&#34;)&#39;</span><span class=p>,</span> <span class=n>number</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>repeat</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;repeat:&#34;</span><span class=p>,</span> <span class=n>res</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>res</span> <span class=o>=</span> <span class=n>timeit</span><span class=o>.</span><span class=n>Timer</span><span class=p>(</span><span class=s1>&#39;print(&#34;Timer&#34;)&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>res</span> <span class=o>=</span> <span class=n>res</span><span class=o>.</span><span class=n>timeit</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Timer:&#34;</span><span class=p>,</span> <span class=n>res</span><span class=p>)</span>
</span></span></code></pre></div></section></article></main></div><div><footer id=site-footer class=toplevel-container><p>このサイトでは <a href=https://icons8.jp/>icons8</a> の素材を使用しています。</p><p>&copy; 2025 namoshika, All rights reserved</p></footer></div></div></body></html>