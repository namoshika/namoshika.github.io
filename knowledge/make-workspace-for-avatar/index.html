<!doctype html><html lang=ja-jp><head><meta charset=utf-8><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="作業環境の方針 標準構成として以下のツールを導入します。 Unity Hub Unity DynamicBone VRChat SDK Blender Git ディレクトリ構造の方針は以下の通り。 VRCAvatar_Workspace ... プロジェクト名 ┣ Assets ┃ ┣ Asset01 ... DL し"><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]}}</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><meta name=generator content="Hugo 0.120.3"><title>01. 作業環境を構築する (アバター用) | Memo.Namo</title>
<meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/style/main.css></head><body><div class=flexbox><div><header id=site-header class=toplevel-container><h1><a href=/>Memo.Namo</a></h1><nav><ul class=horizontal-menu><li class=horizontal-menu-item><a href=/about/>About</a></li><li class=horizontal-menu-item><a href=/knowledge/>Knowledge</a></li></ul></nav></header><main id=site-main class=toplevel-container><article class="content-container content-grid"><header class=content-grid-header><div><a class=nav-category href=/knowledge/vrchat/>VRChat</a><h1 class=content-grid-title>01. 作業環境を構築する (アバター用)</h1></div><p class=content-grid-desc><span>公開日: 2022-02-11</span>
<span>更新日: 2022-02-11</span></p></header><aside class=content-grid-side><div class=nav-sticky><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#作業環境の方針>作業環境の方針</a></li><li><a href=#必要ツールをインストールする>必要ツールをインストールする</a><ul><li><a href=#1-unity-hub>1. Unity Hub</a></li><li><a href=#2-unity-本体>2. Unity 本体</a></li><li><a href=#3-その他>3. その他</a></li></ul></li><li><a href=#作業用プロジェクトを作る>作業用プロジェクトを作る</a><ul><li><a href=#1-プロジェクトの作成>1. プロジェクトの作成</a></li><li><a href=#2-編集画面の説明>2. 編集画面の説明</a></li><li><a href=#3-環境設定>3. 環境設定</a></li><li><a href=#4-ディレクトリ構成>4. ディレクトリ構成</a></li><li><a href=#5-git-リポジトリ化>5. Git リポジトリ化</a></li><li><a href=#6-vrchat-sdk-追加>6. VRChat SDK 追加</a></li><li><a href=#7-dynamic-bone-追加>7. Dynamic Bone 追加</a></li><li><a href=#8-開発環境をコミット>8. 開発環境をコミット</a></li></ul></li><li><a href=#環境の定期メンテ>環境の定期メンテ</a><ul><li><a href=#package-の更新>Package の更新</a></li></ul></li><li><a href=#参考資料>参考資料</a></li></ul></nav><nav class=nav-tag><h2>タグ</h2><ul class=tag-container><li class="tag-item tag-item-inactive"><a href=/tags/auth/>Auth</a></li><li class="tag-item tag-item-inactive"><a href=/tags/businessman/>BusinessMan</a></li><li class="tag-item tag-item-inactive"><a href=/tags/database/>Database</a></li><li class="tag-item tag-item-inactive"><a href=/tags/datavisualization/>DataVisualization</a></li><li class="tag-item tag-item-inactive"><a href=/tags/devops/>DevOps</a></li></ul></nav></div></aside><section class="md-content content-grid-main"><h1 id=作業環境の方針>作業環境の方針</h1><p>標準構成として以下のツールを導入します。</p><ul><li>Unity Hub</li><li>Unity</li><li>DynamicBone</li><li>VRChat SDK</li><li>Blender</li><li>Git</li></ul><p>ディレクトリ構造の方針は以下の通り。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>VRCAvatar_Workspace                ... プロジェクト名
</span></span><span class=line><span class=cl>┣ Assets
</span></span><span class=line><span class=cl>┃ ┣ Asset01                      ... DL したアセットは Assets 直下に置く
</span></span><span class=line><span class=cl>┃ ┃ ┗ some_file
</span></span><span class=line><span class=cl>┃ ┗ Workspace
</span></span><span class=line><span class=cl>┃ 　 ┣ Scenes
</span></span><span class=line><span class=cl>┃ 　 ┃ ┣ {AvatarName}           ... 作業用シーン (PC)
</span></span><span class=line><span class=cl>┃ 　 ┃ ┗ {AvatarName}_android   ... 作業用シーン (Android)
</span></span><span class=line><span class=cl>┃ 　 ┣ Asset01
</span></span><span class=line><span class=cl>┃ 　 ┃ ┗ some_file_mod          ... 改変分は Workspace へ配置。ディレクトリ構造は原本の構造を踏襲
</span></span><span class=line><span class=cl>┃ 　 ┗ Asset02                   ... 新規分は Workspace へ配置
</span></span><span class=line><span class=cl>┣ Library/
</span></span><span class=line><span class=cl>┣ Packages/
</span></span><span class=line><span class=cl>┣ ProjectSettings/
</span></span><span class=line><span class=cl>┃
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>┗ VRCAvatar_Workspace.sln
</span></span></code></pre></div><h1 id=必要ツールをインストールする>必要ツールをインストールする</h1><h2 id=1-unity-hub>1. Unity Hub</h2><p><a href=https://unity.com/download>公式サイト</a> から <code>UnityHubSetup.exe</code> をダウンロード。起動してウィザードに従いインストール。インストールが完了したら Unity Hub 起動はせずに閉じます。</p><p>(起動した場合、最新の LTS 版 Unity をインストールをしようとしてきます。 VRChat で使用されている Unity バージョンとは異なるため、 インストールせずに閉じてください)</p><h2 id=2-unity-本体>2. Unity 本体</h2><p><a href=https://docs.vrchat.com/docs/current-unity-version>公式ドキュメント</a> を開き、VRChat クライアントで使用されている Unity バージョンを調べて PC へインストールします。公式ドキュメントには対応バージョンを Unity Hub でインストールできるリンクがあります。インストール時には追加で以下のモジュールもインストールしてください。</p><ul><li>Microsoft Visual Studio Community (未インストールであればチェックオン)</li><li>Android Build Support 配下 (Meta Quest2 への対応に必要)</li><li>言語パック 日本語 (開発環境が日本語化される)</li></ul><p>インストールが完了すると、 Unity Hub のインストール一覧に表示されるようになります。</p><p><img src=image/unityhub-install-unity02.jpg alt=unityhub-install-unity02></p><h2 id=3-その他>3. その他</h2><p>以下のツールの最新版をインストール。</p><ul><li>Blender &mldr; 無料モデリングソフト</li><li>Git &mldr; バージョン管理システム。アバター改変失敗時の巻き戻しが行いやすくなります。</li></ul><h1 id=作業用プロジェクトを作る>作業用プロジェクトを作る</h1><h2 id=1-プロジェクトの作成>1. プロジェクトの作成</h2><p>Unity Hub を起動しプロジェクトを生成します。</p><ul><li>テンプレート: 3Dコア</li><li>プロジェクト名: VRCAvatar_Workspace (任意の名前でも良し)</li></ul><p><img src=image/unityhub-make-project01.jpg alt=unityhub-make-project01>
<img src=image/unityhub-make-project02.jpg alt=unityhub-make-project02></p><h2 id=2-編集画面の説明>2. 編集画面の説明</h2><p>プロジェクトを作成するとソース保存ディレクトリに VRCAvatar_Workspace フォルダが作成された後、 Editor が起動します。Editor は幾つかのウィンドウから成りますが、以下のウィンドウが良く使用されます。アバターの着せ替えやアップロードはシーンに配置するものに対して行う形になります。</p><ol><li>シーンビュー &mldr; 編集中のシーンが表示される</li><li>ヒエラルキーウィンドウ &mldr; 現在のシーンにあるゲームオブジェクト。</li><li>プロジェクトウィンドウ &mldr; プロジェクトに属するアセット</li><li>インスペクターウィンドウ &mldr; 選択されているオブジェクトに関する詳細情報</li></ol><p>以下の画面では <code>Assets/Workspace/Scenes</code> 配下にあるシーン <code>WorkspaceScene</code> が編集中になっており、ヒエラルキーやシーンに表示された状態です。</p><p><img src=image/unityhub-make-project03.png alt=unityhub-make-project03></p><h2 id=3-環境設定>3. 環境設定</h2><p>以下の作業は1回行えば全てのプロジェクトで設定が共有されます。</p><p><strong>外部ツール設定</strong><br>Editor のメニューの <code>[編集]-[環境設定]</code> を開き、 <code>外部ツール</code> セクションを選択。 <code>外部スクリプトエディター</code> を <code>Visual Studio Community</code> にします。</p><p><img src=image/unityhub-make-project04.png alt=unityhub-make-project04></p><p><strong>バージョン管理用設定</strong><br>Editor のメニューの <code>[編集]-[プロジェクト設定]</code> を開き、 <code>エディター</code> セクションを選択。表示される設定項目のうち、以下項目を画像のように設定。</p><ul><li>バージョン管理 &mldr; Meta ファイルを可視状態にします</li><li>アセットのシリアル化 &mldr; シーンやマテリアル、プレハブなどをテキストフォーマットで扱います</li></ul><p><img src=image/unityhub-make-project05.png alt=unityhub-make-project05></p><h2 id=4-ディレクトリ構成>4. ディレクトリ構成</h2><p>アセット類を格納するディレクトリ構造を以下の様にする。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Assets
</span></span><span class=line><span class=cl>┗ Workspace
</span></span><span class=line><span class=cl>　 ┗ Scenes
</span></span></code></pre></div><h2 id=5-git-リポジトリ化>5. Git リポジトリ化</h2><p>プロジェクトディレクトリ直下をコンソールで開き、以下コマンドでリポジトリ作成 & 初回コミット。この時、リポジトリ固有設定で <code>core.autocrlf</code> を <code>false</code> にする事で、改行コードの自動変換を無効化してます。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>PS</span><span class=p>&gt;</span> <span class=nb>Invoke-WebRequest</span> <span class=s2>&#34;https://www.toptal.com/developers/gitignore/api/Unity&#34;</span> <span class=n>-OutFile</span> <span class=s2>&#34;.gitignore&#34;</span>
</span></span><span class=line><span class=cl><span class=n>PS</span><span class=p>&gt;</span> <span class=n>git</span> <span class=n>init</span>
</span></span><span class=line><span class=cl><span class=n>PS</span><span class=p>&gt;</span> <span class=n>git</span> <span class=n>config</span> <span class=p>-</span><span class=n>-local</span> <span class=n>core</span><span class=p>.</span><span class=py>autocrlf</span> <span class=n>false</span>
</span></span><span class=line><span class=cl><span class=n>PS</span><span class=p>&gt;</span> <span class=n>git</span> <span class=n>add</span> <span class=n>-A</span>
</span></span><span class=line><span class=cl><span class=n>PS</span><span class=p>&gt;</span> <span class=n>git</span> <span class=n>commit</span> <span class=n>-m</span> <span class=s1>&#39;initial commit&#39;</span>
</span></span></code></pre></div><h2 id=6-vrchat-sdk-追加>6. VRChat SDK 追加</h2><p>アバターアップロード用</p><ol><li><code>SDK3 - Avatars</code> を DL (<a href=https://vrchat.com/home/download>https://vrchat.com/home/download</a>)</li><li>DL した unitypackage ファイルをインポート (Editor 画面へ Drag&amp;Drop)</li></ol><h2 id=7-dynamic-bone-追加>7. Dynamic Bone 追加</h2><p>揺れモノ用</p><ol><li>Editor メニュー <code>[ウィンドウ]-[Package Manager]</code> を開く</li><li>マイアセット一覧を表示</li><li>Dynamic Bone を選択</li><li>アセットをインポート</li></ol><p><img src=image/unityhub-make-project07.png alt=unityhub-make-project07></p><h2 id=8-開発環境をコミット>8. 開発環境をコミット</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>PS</span><span class=p>&gt;</span> <span class=n>git</span> <span class=n>add</span> <span class=n>-A</span>
</span></span><span class=line><span class=cl><span class=n>PS</span><span class=p>&gt;</span> <span class=n>git</span> <span class=n>commit</span> <span class=n>-m</span> <span class=s1>&#39;Build up editing environment&#39;</span>
</span></span></code></pre></div><h1 id=環境の定期メンテ>環境の定期メンテ</h1><h2 id=package-の更新>Package の更新</h2><p>プロジェクトが参照しているパッケージはしばしば新バージョンがリリースされます。必要に応じてアップデートします。</p><ol><li>Editor メニュー <code>[ウィンドウ]-[Package Manager]</code> を開く</li><li>プロジェクトに読み込まれたパッケージ一覧を表示</li><li>新バージョンが出ているパッケージを選択</li><li>パッケージをアップデート</li></ol><p><img src=image/unityhub-make-project06.png alt=unityhub-make-project06></p><h1 id=参考資料>参考資料</h1><ul><li>The VRChat Documentation Hub<br><a href=https://docs.vrchat.com/>https://docs.vrchat.com/</a></li></ul></section></article></main></div><div><footer id=site-footer class=toplevel-container><p>このサイトでは <a href=https://icons8.jp/>icons8</a> の素材を使用しています。</p><p>&copy; 2023 namoshika, All rights reserved</p></footer></div></div></body></html>