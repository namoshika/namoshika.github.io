<!doctype html><html lang=ja-jp><head><meta charset=utf-8><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="æ¦‚è¦
Gemini API ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€Google ã®æœ€æ–°ã®ç”Ÿæˆãƒ¢ãƒ‡ãƒ«ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã€‚Python ã‹ã‚‰ã¯ Google Gen AI SDK ã‚’é€šã™ã“ã¨ã§ç°¡å˜ã«ä½¿ç”¨ã§ãã‚‹ã€‚
Gemini ã®ä½¿ç”¨ã«ã¯ API Key ã‚’è¦ã—ã€Google AI Studio ã‹ã‚‰ç™ºè¡Œå¯èƒ½ã€‚
https://aistudio.google.com/"><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]}}</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><meta name=generator content="Hugo 0.147.7"><title>Google Gen AI SDK | Memo.Namo</title><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/style/main.css></head><body><div class=flexbox><div><header id=site-header class=toplevel-container><h1><a href=/>Memo.Namo</a></h1><nav><ul class=horizontal-menu><li class=horizontal-menu-item><a href=/about/>About</a></li><li class=horizontal-menu-item><a href=/knowledge/>Knowledge</a></li></ul></nav></header><main id=site-main class=toplevel-container><article class="content-container content-grid"><header class=content-grid-header><div><a class=nav-category href=/knowledge/python/>Python</a><h1 class=content-grid-title>Google Gen AI SDK</h1></div><p class=content-grid-desc><span>å…¬é–‹æ—¥: 2025-05-18</span>
<span>æ›´æ–°æ—¥: 2025-05-18</span></p></header><aside class=content-grid-side><div class=nav-sticky><h2>ç›®æ¬¡</h2><nav id=TableOfContents><ul><li><a href=#æ¦‚è¦>æ¦‚è¦</a></li><li><a href=#1-è³ªå•ã™ã‚‹>1. è³ªå•ã™ã‚‹</a><ul><li><a href=#åŸºæœ¬çš„ãªä½¿ã„æ–¹>åŸºæœ¬çš„ãªä½¿ã„æ–¹</a></li><li><a href=#ãƒ­ãƒ¼ãƒ«ã‚’æŒ‡å®š>ãƒ­ãƒ¼ãƒ«ã‚’æŒ‡å®š</a></li></ul></li><li><a href=#2-ç”»åƒã‚’å…¥åŠ›ã™ã‚‹>2. ç”»åƒã‚’å…¥åŠ›ã™ã‚‹</a><ul><li><a href=#ç”»åƒèªè­˜ã•ã›ã‚‹>ç”»åƒèªè­˜ã•ã›ã‚‹</a></li><li><a href=#ç‰©ä½“æ¤œçŸ¥ã•ã›ã‚‹>ç‰©ä½“æ¤œçŸ¥ã•ã›ã‚‹</a></li></ul></li><li><a href=#3-ãƒãƒ£ãƒƒãƒˆå½¢å¼>3. ãƒãƒ£ãƒƒãƒˆå½¢å¼</a></li><li><a href=#4-ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œ>4. ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œ</a></li><li><a href=#5-ç”»åƒã‚’ç”Ÿæˆ>5. ç”»åƒã‚’ç”Ÿæˆ</a></li><li><a href=#6-ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—>6. ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—</a></li><li><a href=#7-åŸ‹ã‚è¾¼ã¿è¡¨ç¾ã‚’å–å¾—ã™ã‚‹>7. åŸ‹ã‚è¾¼ã¿è¡¨ç¾ã‚’å–å¾—ã™ã‚‹</a></li></ul></nav><nav class=nav-tag><h2>ã‚¿ã‚°</h2><ul class=tag-container><li class="tag-item tag-item-inactive"><a href=/tags/auth/>Auth</a></li><li class="tag-item tag-item-inactive"><a href=/tags/businessman/>BusinessMan</a></li><li class="tag-item tag-item-inactive"><a href=/tags/database/>Database</a></li><li class="tag-item tag-item-inactive"><a href=/tags/dataengineering/>DataEngineering</a></li><li class="tag-item tag-item-inactive"><a href=/tags/datavisualization/>DataVisualization</a></li><li class="tag-item tag-item-inactive"><a href=/tags/devops/>DevOps</a></li><li class="tag-item tag-item-inactive"><a href=/tags/iac/>IaC</a></li><li class="tag-item tag-item-inactive"><a href=/tags/infrastructure/>Infrastructure</a></li></ul></nav></div></aside><section class="md-content content-grid-main"><h1 id=æ¦‚è¦>æ¦‚è¦</h1><p>Gemini API ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€Google ã®æœ€æ–°ã®ç”Ÿæˆãƒ¢ãƒ‡ãƒ«ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã€‚Python ã‹ã‚‰ã¯ Google Gen AI SDK ã‚’é€šã™ã“ã¨ã§ç°¡å˜ã«ä½¿ç”¨ã§ãã‚‹ã€‚</p><p>Gemini ã®ä½¿ç”¨ã«ã¯ API Key ã‚’è¦ã—ã€Google AI Studio ã‹ã‚‰ç™ºè¡Œå¯èƒ½ã€‚<br><a href=https://aistudio.google.com/>https://aistudio.google.com/</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ pip install google-genai
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>google</span> <span class=kn>import</span> <span class=n>genai</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>GEMINI_API_KEY</span><span class=o>=</span><span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&#34;GEMINI_API_KEY&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>client</span> <span class=o>=</span> <span class=n>genai</span><span class=o>.</span><span class=n>Client</span><span class=p>(</span><span class=n>api_key</span><span class=o>=</span><span class=n>GEMINI_API_KEY</span><span class=p>)</span>
</span></span></code></pre></div><p>â€» å¤ã„ SDK ã«æ³¨æ„<br>ä»¥ä¸‹ã®ã‚ˆã†ãª import ãŒã‚ã‚‹å ´åˆã€Gen AI SDK ã¸ç§»è¡Œã™ã‚‹å‰ã® Gemini SDK ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹ã€‚
ç”»åƒç”Ÿæˆã¸å¯¾å¿œã™ã‚‹ãªã©ã€Gen AI SDK ã®æ–¹ãŒé©ç”¨ç¯„å›²ãŒåºƒã„ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>import</span> <span class=nn>google.generativeai</span> <span class=k>as</span> <span class=nn>genai</span>
</span></span></code></pre></div><h1 id=1-è³ªå•ã™ã‚‹>1. è³ªå•ã™ã‚‹</h1><p>ä½¿ç”¨å¯èƒ½ãªãƒ¢ãƒ‡ãƒ«<br><a href="https://ai.google.dev/gemini-api/docs/models?hl=ja">https://ai.google.dev/gemini-api/docs/models?hl=ja</a></p><h2 id=åŸºæœ¬çš„ãªä½¿ã„æ–¹>åŸºæœ¬çš„ãªä½¿ã„æ–¹</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>from</span> <span class=nn>IPython.display</span> <span class=kn>import</span>  <span class=n>Markdown</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>response</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>models</span><span class=o>.</span><span class=n>generate_content</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=n>model</span><span class=o>=</span><span class=s2>&#34;gemini-2.0-flash&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>contents</span><span class=o>=</span><span class=s2>&#34;AI ã®ä»•çµ„ã¿ã‚’ IT ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å‘ã‘ã« 400 æ–‡å­—å‰å¾Œã§èª¬æ˜ã—ã¦ãã ã•ã„&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Markdown</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>text</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=ãƒ­ãƒ¼ãƒ«ã‚’æŒ‡å®š>ãƒ­ãƒ¼ãƒ«ã‚’æŒ‡å®š</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>from</span> <span class=nn>IPython.display</span> <span class=kn>import</span>  <span class=n>Markdown</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>response</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>models</span><span class=o>.</span><span class=n>generate_content</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>model</span><span class=o>=</span><span class=s2>&#34;gemini-2.0-flash&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>contents</span><span class=o>=</span><span class=s2>&#34;ç§ã¯ç½ªã‚’çŠ¯ã—ã¾ã—ãŸã€‚è±†è…ã®è§’ã§éš£äººã‚’æ®´ã£ã¦ã—ã¾ã„ã¾ã—ãŸ&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>config</span><span class=o>=</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;system_instruction&#34;</span><span class=p>:</span> <span class=s2>&#34;ã‚ãªãŸã¯ç¥ã§ã™ã€‚è³ªå•ã«å¯¾ã—ã¦ç¥ã‚‰ã—ãå›ç­”ã—ã¦ãã ã•ã„ã€‚&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Markdown</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>text</span><span class=p>)</span>
</span></span></code></pre></div><h1 id=2-ç”»åƒã‚’å…¥åŠ›ã™ã‚‹>2. ç”»åƒã‚’å…¥åŠ›ã™ã‚‹</h1><h2 id=ç”»åƒèªè­˜ã•ã›ã‚‹>ç”»åƒèªè­˜ã•ã›ã‚‹</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>import</span> <span class=nn>PIL.Image</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>IPython.display</span> <span class=kn>import</span>  <span class=n>Markdown</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>img_sample</span> <span class=o>=</span> <span class=n>PIL</span><span class=o>.</span><span class=n>Image</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=s2>&#34;sample.jpg&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>response</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>models</span><span class=o>.</span><span class=n>generate_content</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>model</span><span class=o>=</span><span class=s2>&#34;gemini-2.0-flash&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>contents</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;ã“ã®ç”»åƒã«ã¯ä½•ãŒå†™ã£ã¦ã„ã‚‹ã®ã‹ã‚’èª¬æ˜ã—ã¦ãã ã•ã„&#34;</span><span class=p>,</span> <span class=n>img_sample</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Markdown</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>text</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=ç‰©ä½“æ¤œçŸ¥ã•ã›ã‚‹>ç‰©ä½“æ¤œçŸ¥ã•ã›ã‚‹</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>import</span> <span class=nn>PIL.Image</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>dataclasses</span> <span class=kn>import</span> <span class=n>dataclass</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>TypedDict</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BoundingBox</span><span class=p>(</span><span class=n>TypedDict</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>ymin</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>    <span class=n>xmin</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>    <span class=n>ymax</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>    <span class=n>xmax</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>DetectedObject</span><span class=p>(</span><span class=n>TypedDict</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>boundingbox</span><span class=p>:</span> <span class=n>BoundingBox</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>img_sample</span> <span class=o>=</span> <span class=n>PIL</span><span class=o>.</span><span class=n>Image</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=s2>&#34;sample.jpg&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>response</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>models</span><span class=o>.</span><span class=n>generate_content</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>model</span><span class=o>=</span><span class=s2>&#34;gemini-2.0-flash&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>contents</span><span class=o>=</span><span class=p>[</span><span class=n>img_sample</span><span class=p>,</span> <span class=s1>&#39;ç”»åƒã®ä¸­ã®ç‰©ä½“ã‚’ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒœãƒƒã‚¯ã‚¹ã§å›²ã£ã¦ãã ã•ã„ã€‚çµæœã¯æ¬¡ã®å½¢å¼ã«æ²¿ã£ã¦JSON ({&#34;name&#34;: &#34;detected_object_name&#34;, &#34;bounding_box&#34;: [ymin, xmin, ymax, xmax]}) ã§å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚JSONã®ã¿ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=n>config</span><span class=o>=</span><span class=p>{</span> <span class=s2>&#34;response_mime_type&#34;</span><span class=p>:</span> <span class=s2>&#34;application/json&#34;</span><span class=p>,</span> <span class=s2>&#34;response_schema&#34;</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>DetectedObject</span><span class=p>]</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><p>å‡ºåŠ›</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[{</span><span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;cat&#34;</span><span class=p>,</span> <span class=nt>&#34;boundingbox&#34;</span><span class=p>:</span> <span class=p>{</span><span class=nt>&#34;ymin&#34;</span><span class=p>:</span> <span class=mi>176</span><span class=p>,</span> <span class=nt>&#34;xmin&#34;</span><span class=p>:</span> <span class=mi>100</span><span class=p>,</span> <span class=nt>&#34;ymax&#34;</span><span class=p>:</span> <span class=mi>620</span><span class=p>,</span> <span class=nt>&#34;xmax&#34;</span><span class=p>:</span> <span class=mi>795</span><span class=p>}}]</span>
</span></span></code></pre></div><h1 id=3-ãƒãƒ£ãƒƒãƒˆå½¢å¼>3. ãƒãƒ£ãƒƒãƒˆå½¢å¼</h1><p>éå»ã®ã‚„ã‚Šå–ã‚Šã®æ–‡è„ˆã‚’åæ˜ ã•ã›ãŸã„å ´åˆã«ã¯ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä½œã‚‹ã€‚</p><p>ã‚³ãƒ¼ãƒ‰</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>sess</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>chats</span><span class=o>.</span><span class=n>create</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=s2>&#34;gemini-2.0-flash&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>res</span> <span class=o>=</span> <span class=n>sess</span><span class=o>.</span><span class=n>send_message</span><span class=p>(</span><span class=s2>&#34;ã“ã‚“ã«ã¡ã‚&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=o>.</span><span class=n>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>res</span> <span class=o>=</span> <span class=n>sess</span><span class=o>.</span><span class=n>send_message</span><span class=p>(</span><span class=s2>&#34;ç§ã¯ã‚±ãƒ“ãƒ³ã§ã™&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=o>.</span><span class=n>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>res</span> <span class=o>=</span> <span class=n>sess</span><span class=o>.</span><span class=n>send_message</span><span class=p>(</span><span class=s2>&#34;ç§ã®åå‰ã¯ãªã‚“ã§ã—ã‚‡ã†&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=o>.</span><span class=n>text</span><span class=p>)</span>
</span></span></code></pre></div><p>å‡ºåŠ›</p><blockquote><p>ã“ã‚“ã«ã¡ã¯ï¼ä½•ã‹ãŠæ‰‹ä¼ã„ã§ãã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼ŸğŸ˜Š</p><p>ã‚±ãƒ“ãƒ³ã•ã‚“ã€ã“ã‚“ã«ã¡ã¯ï¼ ã©ã‚“ãªã“ã¨ã«é–¢å¿ƒãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ ä½•ã‹ãŠæ‰‹ä¼ã„ã§ãã‚‹ã“ã¨ãŒã‚ã‚Œã°æ•™ãˆã¦ãã ã•ã„ã­ã€‚ğŸ˜Š</p><p>ã‚ãªãŸã¯ã‚±ãƒ“ãƒ³ã•ã‚“ã§ã™ã€‚ãã†è¨€ã„ã¾ã—ãŸã­ã€‚</p></blockquote><h1 id=4-ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œ>4. ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œ</h1><p>ã‚³ãƒ¼ãƒ‰</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>import</span>  <span class=nn>google.genai.types</span> <span class=k>as</span> <span class=nn>typs</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>IPython.display</span> <span class=kn>import</span>  <span class=n>Markdown</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>response</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>models</span><span class=o>.</span><span class=n>generate_content</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>model</span><span class=o>=</span><span class=s2>&#34;gemini-1.5-flash&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>contents</span><span class=o>=</span><span class=s2>&#34;æ•´æ•°ã‚’1ï½40ã¾ã§è¡¨ç¤ºã™ã‚‹ python ã‚’ç”Ÿæˆã—å®Ÿè¡Œçµæœã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚ãŸã ã— 3ã®å€æ•°ã¨3ã®ã¤ãæ•°å­—ã ã‘ã‚¢ãƒ›ã«ãªã‚Šã¾ã™&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>config</span><span class=o>=</span><span class=n>typs</span><span class=o>.</span><span class=n>GenerateContentConfig</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>tools</span><span class=o>=</span><span class=p>[</span><span class=n>typs</span><span class=o>.</span><span class=n>Tool</span><span class=p>(</span><span class=n>code_execution</span><span class=o>=</span><span class=n>typs</span><span class=o>.</span><span class=n>ToolCodeExecution</span><span class=p>)],</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Markdown</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>text</span><span class=p>)</span>
</span></span></code></pre></div><p>å‡ºåŠ›</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>```python
</span></span><span class=line><span class=cl>for i in range(1, 41):
</span></span><span class=line><span class=cl>    if i % 3 == 0 or &#39;3&#39; in str(i):
</span></span><span class=line><span class=cl>        print(&#34;ã‚¢ãƒ›&#34;)
</span></span><span class=line><span class=cl>    else:
</span></span><span class=line><span class=cl>        print(i)
</span></span><span class=line><span class=cl>```
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>å®Ÿè¡Œçµæœï¼š
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>```
</span></span><span class=line><span class=cl>1
</span></span><span class=line><span class=cl>2
</span></span><span class=line><span class=cl>ã‚¢ãƒ›
</span></span><span class=line><span class=cl>4
</span></span><span class=line><span class=cl>5
</span></span><span class=line><span class=cl>ã‚¢ãƒ›
</span></span><span class=line><span class=cl>7
</span></span><span class=line><span class=cl>8
</span></span><span class=line><span class=cl>ã‚¢ãƒ›
</span></span><span class=line><span class=cl>10
</span></span><span class=line><span class=cl>11
</span></span><span class=line><span class=cl>ã‚¢ãƒ›
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>ã‚¢ãƒ›
</span></span><span class=line><span class=cl>ã‚¢ãƒ›
</span></span><span class=line><span class=cl>40
</span></span><span class=line><span class=cl>```
</span></span></code></pre></div><p>ã‚³ãƒ¼ãƒ‰ã¨å®Ÿè¡Œçµæœã¯åˆ†ã‘ã¦æ‰±ã†ã“ã¨ã‚‚å¯èƒ½ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>executable_code</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>code_execution_result</span><span class=p>)</span>
</span></span></code></pre></div><h1 id=5-ç”»åƒã‚’ç”Ÿæˆ>5. ç”»åƒã‚’ç”Ÿæˆ</h1><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>from</span> <span class=nn>IPython.display</span> <span class=kn>import</span>  <span class=n>display</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>io</span> <span class=kn>import</span> <span class=n>BytesIO</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>PIL</span> <span class=kn>import</span> <span class=n>Image</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>response</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>models</span><span class=o>.</span><span class=n>generate_content</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>model</span><span class=o>=</span><span class=s2>&#34;gemini-2.0-flash-preview-image-generation&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>contents</span><span class=o>=</span><span class=s2>&#34;Linus Torvalds playing PC games happily on Windows&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>config</span><span class=o>=</span><span class=p>{</span> <span class=s2>&#34;response_modalities&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;TEXT&#39;</span><span class=p>,</span> <span class=s1>&#39;IMAGE&#39;</span><span class=p>]}</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>bytes_png</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>candidates</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>content</span><span class=o>.</span><span class=n>parts</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>inline_data</span><span class=o>.</span><span class=n>data</span>
</span></span><span class=line><span class=cl><span class=n>image</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=n>BytesIO</span><span class=p>((</span><span class=n>bytes_png</span><span class=p>)))</span>
</span></span><span class=line><span class=cl><span class=n>display</span><span class=p>(</span><span class=n>image</span><span class=p>)</span>
</span></span></code></pre></div><h1 id=6-ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—>6. ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—</h1><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>from</span> <span class=nn>google.genai.types</span> <span class=kn>import</span> <span class=n>GenerateContentConfig</span><span class=p>,</span> <span class=n>Tool</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>weather_func</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;get_current_weather&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;ç¾åœ¨åœ°ã®å¤©æ°—ã‚’å–å¾—ã—ã¾ã™&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;parameters&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;object&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;properties&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;location&#34;</span><span class=p>:</span> <span class=p>{</span> <span class=s2>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;string&#34;</span><span class=p>,</span> <span class=s2>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;éƒ½å¸‚å&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;required&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;location&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>tools</span> <span class=o>=</span> <span class=n>Tool</span><span class=p>(</span><span class=n>functionDeclarations</span><span class=o>=</span><span class=p>[</span><span class=n>weather_func</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>conf</span> <span class=o>=</span> <span class=n>GenerateContentConfig</span><span class=p>(</span><span class=n>tools</span><span class=o>=</span><span class=p>[</span><span class=n>tools</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>res</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>models</span><span class=o>.</span><span class=n>generate_content</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>model</span><span class=o>=</span><span class=s2>&#34;gemini-2.0-flash&#34;</span><span class=p>,</span> <span class=n>contents</span><span class=o>=</span><span class=s2>&#34;æ±äº¬ã®å¤©æ°—&#34;</span><span class=p>,</span> <span class=n>config</span><span class=o>=</span><span class=n>conf</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>res</span>
</span></span></code></pre></div><p>ãƒ„ãƒ¼ãƒ«ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>res</span><span class=o>.</span><span class=n>function_calls</span>
</span></span><span class=line><span class=cl><span class=o>&gt;</span> <span class=p>[</span><span class=n>FunctionCall</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;location&#39;</span><span class=p>:</span> <span class=s1>&#39;æ±äº¬&#39;</span><span class=p>},</span> <span class=n>name</span><span class=o>=</span><span class=s1>&#39;get_current_weather&#39;</span><span class=p>)]</span>
</span></span></code></pre></div><h1 id=7-åŸ‹ã‚è¾¼ã¿è¡¨ç¾ã‚’å–å¾—ã™ã‚‹>7. åŸ‹ã‚è¾¼ã¿è¡¨ç¾ã‚’å–å¾—ã™ã‚‹</h1><p>å‚è€ƒ: <a href="https://ai.google.dev/gemini-api/docs/embeddings?hl=ja">https://ai.google.dev/gemini-api/docs/embeddings?hl=ja</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>models</span><span class=o>.</span><span class=n>embed_content</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>model</span><span class=o>=</span><span class=s2>&#34;gemini-embedding-exp-03-07&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>contents</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;ã‚ã£ã—ã‚‡ã„ã‚ã£ã—ã‚‡ã„&#34;</span><span class=p>,</span> <span class=s2>&#34;ã‚ã°ã°ã°&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=n>config</span><span class=o>=</span><span class=p>{</span> <span class=s2>&#34;task_type&#34;</span><span class=p>:</span> <span class=s2>&#34;SEMANTIC_SIMILARITY&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>embeddings</span><span class=p>)</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-Py data-lang=Py><span class=line><span class=cl><span class=nb>len</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>embeddings</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=o>&gt;</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>result</span><span class=o>.</span><span class=n>embeddings</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>values</span><span class=p>[:</span><span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=o>&gt;</span> 
</span></span><span class=line><span class=cl><span class=p>[</span><span class=o>-</span><span class=mf>0.016820915</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=o>-</span><span class=mf>0.0012726645</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=mf>0.01619753</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=o>-</span><span class=mf>0.07796676</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=o>-</span><span class=mf>0.033992294</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=mf>0.00074800395</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=mf>0.0039061843</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=mf>0.004672302</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=mf>0.016051557</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=mf>0.019814486</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div></section></article></main></div><div><footer id=site-footer class=toplevel-container><p>ã“ã®ã‚µã‚¤ãƒˆã§ã¯ <a href=https://icons8.jp/>icons8</a> ã®ç´ æã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚</p><p>&copy; 2025 namoshika, All rights reserved</p></footer></div></div></body></html>